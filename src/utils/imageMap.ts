// This file is auto-generated by scripts/merge_sku_bible.py
// It contains the list of all available Teamwear images and an O(1) matching helper.

const AVAILABLE_IMAGES = [
    "0018NZ-010.png",
    "0100NZ-010.webp",
    "0100NZ-100.png",
    "0100NZ-451.png",
    "0100NZ-463.png",
    "0100NZ-657.png",
    "0100NZ-719.png",
    "0101NZ-010.png",
    "0101NZ-100.png",
    "0102NZ-010.webp",
    "0102NZ-100.png",
    "0102NZ-101.png",
    "0102NZ-451.png",
    "0102NZ-463.png",
    "0102NZ-657.png",
    "0102NZ-658.webp",
    "0102NZ-719.png",
    "0107NZ-010.webp",
    "0200NZ-100.webp",
    "0200NZ-451.webp",
    "0208NZ-010.png",
    "0213NZ-010.png",
    "0222NZ-010.png",
    "0222NZ-451.png",
    "0223NZ-010.png",
    "0223NZ-451.png",
    "0226NZ-010.png",
    "0227NZ-010.png",
    "0227NZ-063.png",
    "0228NZ-010.webp",
    "0228NZ-063.webp",
    "0228NZ-451.webp",
    "0231NZ-010.png",
    "0231NZ-100.webp",
    "0231NZ-451.webp",
    "0232NZ-010.png",
    "0232NZ-451.png",
    "0335NZ-010.png",
    "0335NZ-100.png",
    "0335NZ-451.png",
    "0335NZ-463.png",
    "0335NZ-657.png",
    "0336NZ-451.png",
    "0336NZ-463.png",
    "0336NZ-657.png",
    "0338NZ-010.png",
    "0338NZ-010.webp",
    "0338NZ-451.webp",
    "0338NZ-463.png",
    "0339NZ-010.png",
    "0341NZ-010.jpg",
    "0342NZ-010.png",
    "0342NZ-451.png",
    "0343NZ-010.png",
    "0347NZ-010.png",
    "0347NZ-451.png",
    "0348NZ-010.png",
    "0348NZ-451.png",
    "0401NZ-010.png",
    "0401NZ-451.png",
    "0402NZ-010.png",
    "0402NZ-451.png",
    "0412NZ-010.webp",
    "0412NZ-100.png",
    "0412NZ-451.webp",
    "0413NZ-010.webp",
    "0413NZ-100.png",
    "0413NZ-451.webp",
    "0414NZ-010.png",
    "0900NZ-010.webp",
    "0900NZ-463.webp",
    "0903NZ-010.webp",
    "0903NZ-100.webp",
    "0903NZ-101.webp",
    "0903NZ-302.webp",
    "0903NZ-451.webp",
    "0903NZ-463.webp",
    "0903NZ-657.webp",
    "0904NZ-010.webp",
    "0904NZ-302.webp",
    "0904NZ-451.webp",
    "0904NZ-463.webp",
    "0904NZ-657.webp",
    "0905NZ-463.webp",
    "0907NZ-010.webp",
    "0907NZ-302.webp",
    "0907NZ-451.webp",
    "0907NZ-463.webp",
    "0907NZ-657.webp",
    "26-02-18 Consolidated SKUs.png",
    "644776-102.jpg",
    "645045-010.webp",
    "683485-010.jpg",
    "718833-010.jpg",
    "718833-100.jpg",
    "718833-451.jpg",
    "748439-010.webp",
    "800492-010.png",
    "804314-010.png",
    "804314-475.png",
    "830847-100.jpg",
    "831530-010-.jpg",
    "831530-010.jpg",
    "853928-010.jpg",
    "932499-010.webp",
    "943091-010.webp",
    "943092-010.webp",
    "A19913-010.jpg",
    "A19913-100.png",
    "A19913-101.png",
    "A19913-103.png",
    "A19913-341.png",
    "A19913-451.png",
    "A19913-463.png",
    "A19913-657.png",
    "A19913-719.png",
    "A19914-010.png",
    "A19915-010.jpg",
    "A19916-010.png",
    "A19917-010.jpg",
    "A19918-010.png",
    "A19919-010-A.png",
    "A19919-010-B.png",
    "A19919-010.png",
    "A19919-451-A.png",
    "A19919-451-A_NIKE_TEAM_.png",
    "A19919-451-B.png",
    "A19919-451-B_NIKE_TEAM_.png",
    "A19919-451.png",
    "A19919-463-A.png",
    "A19919-463-A_NIKE_TEAM_.png",
    "A19919-463-B.png",
    "A19919-463-B_NIKE_TEAM_.png",
    "A19919-463.png",
    "A19919-657-A.png",
    "A19919-657-A_NIKE_TEAM_.png",
    "A19919-657-B.png",
    "A19919-657-B_NIKE_TEAM_.png",
    "A19919-657.png",
    "A19920-010-A.png",
    "A19920-010-B.png",
    "A19920-010.png",
    "A20107-010-A.png",
    "A20107-010.png",
    "A20136-010.png",
    "A20137-010.png",
    "A20138-010.png",
    "A20139-005.png",
    "A20139-010.png",
    "A20141-005.png",
    "A20141-010.png",
    "A20142-005.png",
    "A20142-005_JORDAN_STO.png",
    "A20142-010.png",
    "A20142-010_JORDAN_STO.png",
    "A20143-010.png",
    "A20144-010.png",
    "A20145-010.jpg",
    "A20146-005.png",
    "A20146-010.png",
    "A20147-010.png",
    "A20148-010.png",
    "A20148-463.png",
    "A20149-010.png",
    "A20150-005.png",
    "A20150-010.png",
    "A20151-005.png",
    "A20151-010.png",
    "A20152-005.png",
    "A20152-010.png",
    "AJ4110-010.jpg",
    "AJ7685-010.jpg",
    "AJ7687-010.webp",
    "AJ8128-010.png",
    "AR0382-010.jpg",
    "AR5193-010.jpg",
    "BV2654-010.png",
    "BV2654-063.png",
    "BV6706-010.png",
    "BV6706-100.png",
    "BV6708-010.png",
    "BV6708-100.png",
    "BV6708-302.png",
    "BV6708-354.webp",
    "BV6708-410.png",
    "BV6708-412.png",
    "BV6708-463.png",
    "BV6708-616.webp",
    "BV6708-635.png",
    "BV6708-657.png",
    "BV6708-677.png",
    "BV6708-702.webp",
    "BV6708-719.webp",
    "BV6708-729.webp",
    "BV6708-819.png",
    "BV6728-010.png",
    "BV6728-354.png",
    "BV6728-410.png",
    "BV6728-412.png",
    "BV6728-616.webp",
    "BV6728-657.webp",
    "BV6741-010.png",
    "BV6741-100.png",
    "BV6741-302.png",
    "BV6741-463.png",
    "BV6855-010.webp",
    "BV6855-100.webp",
    "BV6855-410.webp",
    "BV6855-463.webp",
    "BV6855-657.webp",
    "BV6877-010.png",
    "BV6879-010.png",
    "BV6879-100.png",
    "BV6879-410.png",
    "BV6879-463.png",
    "BV6903-010.png",
    "BV6903-410.png",
    "BV6903-463.png",
    "BV6903-657.png",
    "CK0450-010.jpg",
    "CU5992-010.jpg",
    "CU8090-010.png",
    "CU9679-451.jpg",
    "CV2545-010.webp",
    "CW6156-010.png",
    "CW6156-451.png",
    "CW6157-010.png",
    "CW6157-451.jpg",
    "CW6894-010.png",
    "CW6894-063.png",
    "CW6894-451.png",
    "CW6894-463.png",
    "CW6894-657.jpg",
    "CW6896-010.png",
    "CW6896-063.png",
    "CW6896-451.png",
    "CW6902-010.png",
    "CW6902-063.png",
    "CW6902-451.png",
    "CZ9831-010.png",
    "CZ9857-010.png",
    "DA0481-011.webp",
    "DA0483-013.webp",
    "DC2647-010.jpg",
    "DC3598-100.png",
    "DC4245-010.png",
    "DD1917-010.png",
    "DD1919-010.png",
    "DH0822-010.png",
    "DH0822-100.png",
    "DH0857-010.webp",
    "DH0857-100.webp",
    "DH2309-010.webp",
    "DH2309-100.jpg",
    "DH7710-010.webp",
    "DM4755-010.png",
    "DR1356-451.webp",
    "DV0761-011.png",
    "DV0761-410.png",
    "DX0706-010.png",
    "DX0989-100.png",
    "DX0989-451.png",
    "DX6010-010.png",
    "DX6821-010.png",
    "DX6821-100.webp",
    "FB5588-010.webp",
    "FB5682-010.png",
    "FB5682-100.png",
    "FB7368-010.png",
    "FD3000-010.webp",
    "N.100.2041.101.webp",
    "NG0915-010.png",
    "NT0199-010.png",
    "NT0199-100.png",
    "NT0199-101.png",
    "NT0199-102.png",
    "NT0199-103.png",
    "NT0199-104.png",
    "NT0199-302.png",
    "NT0199-451.png",
    "NT0199-463.png",
    "NT0199-464.png",
    "NT0199-657.png",
    "NT0199-719.png",
    "NT0199.png",
    "NT0200-010.png",
    "NT0200-100.png",
    "NT0200-101.png",
    "NT0200-102.png",
    "NT0200-103.png",
    "NT0200-104.png",
    "NT0200-302.png",
    "NT0200-451.png",
    "NT0200-463.png",
    "NT0200-464.png",
    "NT0200-657.png",
    "NT0200-719.png",
    "NT0200.png",
    "NT0201-010.png",
    "NT0201-100.png",
    "NT0201-101.png",
    "NT0201-102.png",
    "NT0201-103.png",
    "NT0201-104.png",
    "NT0201-302.png",
    "NT0201-451.png",
    "NT0201-463.png",
    "NT0201-464.png",
    "NT0201-657.png",
    "NT0201-719.png",
    "NT0201-819.png",
    "NT0202-010.png",
    "NT0202-100.png",
    "NT0202-101.png",
    "NT0202-102.png",
    "NT0202-103.png",
    "NT0202-104.png",
    "NT0202-302.png",
    "NT0202-451.png",
    "NT0202-463.png",
    "NT0202-464.png",
    "NT0202-657.png",
    "NT0202-719.png",
    "NT0202-819.png",
    "NT0203-010.png",
    "NT0203-302.png",
    "NT0203-451.png",
    "NT0203-463.png",
    "NT0203-657.png",
    "NT0203-719.png",
    "NT0203-819.png",
    "NT0203.png",
    "NT0204-010.png",
    "NT0204-302.png",
    "NT0204-451.png",
    "NT0204-463.png",
    "NT0204-657.png",
    "NT0204-719.png",
    "NT0204-819.png",
    "NT0204.png",
    "NT0205-010.png",
    "NT0205-451.png",
    "NT0205-657.png",
    "NT0206-010.png",
    "NT0206-451.png",
    "NT0206-657.png",
    "NT0207-010.png",
    "NT0207-451.png",
    "NT0211-010.png",
    "NT0211-100.png",
    "NT0211-102.png",
    "NT0211-103.png",
    "NT0211-104.png",
    "NT0211-302.png",
    "NT0211-451.png",
    "NT0211-463.png",
    "NT0211-464.png",
    "NT0211-657.png",
    "NT0211-719.png",
    "NT0211.webp",
    "NT0212-010.png",
    "NT0212-100.png",
    "NT0212-102.png",
    "NT0212-103.png",
    "NT0212-104.png",
    "NT0212-302.png",
    "NT0212-451.png",
    "NT0212-463.png",
    "NT0212-464.png",
    "NT0212-657.png",
    "NT0212-719.png",
    "NT0212-819.png",
    "NT0213-010.png",
    "NT0213-302.png",
    "NT0213-451.png",
    "NT0213-463.png",
    "NT0213-657.png",
    "NT0213-719.png",
    "NT0213-819.png",
    "NT0213.png",
    "NT0214-010.png",
    "NT0214-451.png",
    "NT0214-657.png",
    "NT0215-010.png",
    "NT0215-451.png",
    "NT0215.png",
    "NT0300-010.webp",
    "NT0300-100.webp",
    "NT0300-302.png",
    "NT0300-451.webp",
    "NT0300-463.webp",
    "NT0300-657.webp",
    "NT0301-010.png",
    "NT0301-100.png",
    "NT0301-302.jpg",
    "NT0301-451.png",
    "NT0301-463.webp",
    "NT0301-657.png",
    "NT0302-010.png",
    "NT0302-100.png",
    "NT0302-302.png",
    "NT0302-451.png",
    "NT0302-467.png",
    "NT0302-657.png",
    "NT0303-010.webp",
    "NT0304-010.webp",
    "NT0305-451.webp",
    "NT0306-010.png",
    "NT0307-010.png",
    "NT0307-451.webp",
    "NT0308-010.webp",
    "NT0308-100.webp",
    "NT0308-302.webp",
    "NT0308-451.webp",
    "NT0308-463.webp",
    "NT0308-657.webp",
    "NT0309-010.webp",
    "NT0309-451.webp",
    "NT0309-463.webp",
    "NT0309-657.webp",
    "NT0310-010.webp",
    "NT0310-451.webp",
    "NT0310-463.webp",
    "NT0311-010.webp",
    "NT0311-451.webp",
    "NT0313-010.png",
    "NT0313-451.png",
    "NT0314-010.png",
    "NT0314-451.png",
    "NT0315-010.png",
    "NT0315-012.png",
    "NT0315-060.png",
    "NT0315-060_NIKE_TEAM_.webp",
    "NT0315-451.webp",
    "NT0315-463.webp",
    "NT0315-657.webp",
    "NT0316-010.jpg",
    "NT0316-012.png",
    "NT0316-060.jpg",
    "NT0316-302.png",
    "NT0316-451.png",
    "NT0316-463.webp",
    "NT0317-010.png",
    "NT0317-451.png",
    "NT0318-010.png",
    "NT0318-451.png",
    "NT0319-010.png",
    "NT0319-451.png",
    "NT0320-010.png",
    "NT0320-451.webp",
    "NT0320-657.png",
    "NT0321-010.webp",
    "NT0321-451.png",
    "NT0322-010.png",
    "NT0322-451.png",
    "NT0400-133.png",
    "NT0402-133.png",
    "NT0418-133.png",
    "NT0420-133.png",
    "NT0421-133.png",
    "NT0424-133.png",
    "NT0426-133.png",
    "NT0528-010.webp",
    "NT0528-451.webp",
    "NT0557-451.webp",
    "NT0558-451.webp",
    "NT0558-657.webp",
    "NT0582-010.webp",
    "NT0582-677.webp",
    "SX7622-013.png",
    "SX7622-100.png",
    "SX7664-013.jpeg",
    "SX7664-100.jpeg"
];

const PROJECT_URL = 'https://luekeyeoxoymchguhrdt.supabase.co';
const BUCKET = 'product-images';

// Optimized Image Indexing (O(M))
// We create a Map where the KEY is the baseName (filename without extension)
// and the VALUE is the full filename.
const IMAGE_INDEX = new Map<string, string>();
AVAILABLE_IMAGES.forEach(filename => {
    const dotIndex = filename.lastIndexOf('.');
    if (dotIndex !== -1) {
        const baseName = filename.substring(0, dotIndex).toUpperCase();
        // Priority: If multiple extensions exist, keep established one or first found
        if (!IMAGE_INDEX.has(baseName)) {
            IMAGE_INDEX.set(baseName, filename);
        }
    }
});

/**
 * Attempts to resolve a product image path based on the SKU.
 * Uses O(1) Map lookup for maximum performance across large datasets.
 */
export const resolveProductImage = (sku: string): string | undefined => {
    if (!sku) return undefined;

    const normalizedSku = sku.toUpperCase();
    
    // 1. Exact Match Check (Quickest)
    let matchedFile = IMAGE_INDEX.get(normalizedSku);

    // 2. Segment Match Check
    // If no exact match, try stripping the last segment (e.g., "-L" for size)
    if (!matchedFile) {
        const lastDash = normalizedSku.lastIndexOf('-');
        if (lastDash !== -1) {
            const baseSku = normalizedSku.substring(0, lastDash);
            matchedFile = IMAGE_INDEX.get(baseSku);
        }
    }

    if (matchedFile) {
        return `${PROJECT_URL}/storage/v1/object/public/${BUCKET}/${encodeURIComponent(matchedFile)}`;
    }

    return undefined;
};
